<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MathBlocks - Fun Math Puzzles for Kids</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><rect width='100' height='100' rx='20' fill='%236366F1'/><text x='50' y='68' font-size='50' text-anchor='middle' fill='white' font-family='Arial' font-weight='bold'>M</text></svg>">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/styles.css">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.2/dist/confetti.browser.min.js"></script>
</head>
<body>
    <!-- Toast Container -->
    <div id="toastContainer" class="toast-container"></div>

    <!-- Header -->
    <header class="main-header no-print">
        <div class="container">
            <div class="header-content">
                <a href="#" class="logo" onclick="showHome()">
                    <div class="logo-icon">M</div>
                    <span class="logo-text">
                        <span style="color: var(--color-1)">M</span><span style="color: var(--color-2)">a</span><span style="color: var(--color-3)">t</span><span style="color: var(--color-4)">h</span><span style="color: var(--color-5)">B</span><span style="color: var(--color-6)">l</span><span style="color: var(--color-7)">o</span><span style="color: var(--color-8)">c</span><span style="color: var(--color-1)">k</span><span style="color: var(--color-2)">s</span>
                    </span>
                </a>

                <nav>
                    <ul class="nav-menu">
                        <li><a href="#" class="nav-link active" data-page="home" onclick="showHome()">Home</a></li>
                        <li><a href="#" class="nav-link" data-page="puzzles" onclick="showPuzzleSelect()">Puzzles</a></li>
                        <li><a href="#" class="nav-link" data-page="progress" onclick="showProgress()">Progress</a></li>
                    </ul>
                </nav>

                <div class="user-stats">
                    <div class="stat-badge" title="Total Stars Earned">
                        <span id="totalStars">0</span>
                    </div>
                    <button class="btn btn-icon btn-secondary" onclick="toggleSound()" title="Toggle Sound">
                        <span id="soundIcon">üîä</span>
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main id="mainContent">
        <!-- Home Page -->
        <section id="homePage" class="hero">
            <div class="container">
                <h1 class="animate-slide-up">
                    <span class="text-gradient">Learn Math</span> Through Play!
                </h1>
                <p class="animate-slide-up stagger-1">
                    Colorful puzzles that make math fun. Solve problems, reveal pictures, and earn stars along the way!
                </p>
                <div class="hero-actions animate-slide-up stagger-2">
                    <button class="btn btn-primary btn-lg" onclick="showPuzzleSelect()">
                        Start Playing
                    </button>
                    <button class="btn btn-secondary btn-lg" onclick="showProgress()">
                        View Progress
                    </button>
                </div>

                <!-- Puzzle Type Cards -->
                <div class="puzzle-grid">
                    <div class="puzzle-card animate-slide-up stagger-1" onclick="startPuzzle('grid')">
                        <div class="puzzle-card-image" style="background: linear-gradient(135deg, #FEE2E2 0%, #DBEAFE 100%);">
                            üé®
                        </div>
                        <div class="puzzle-card-content">
                            <h3>Color by Number</h3>
                            <p>Solve math problems and color the grid to reveal beautiful patterns!</p>
                            <div class="puzzle-card-meta">
                                <span class="tag">Classic</span>
                                <span class="tag">All Grades</span>
                            </div>
                        </div>
                    </div>

                    <div class="puzzle-card animate-slide-up stagger-2" onclick="startPuzzle('mystery')">
                        <div class="puzzle-card-image" style="background: linear-gradient(135deg, #D1FAE5 0%, #FEF3C7 100%);">
                            üîÆ
                        </div>
                        <div class="puzzle-card-content">
                            <h3>Mystery Picture</h3>
                            <p>Uncover hidden pictures by solving equations. What will you discover?</p>
                            <div class="puzzle-card-meta">
                                <span class="tag new">Popular</span>
                                <span class="tag">Grades 2-6</span>
                            </div>
                        </div>
                    </div>

                    <div class="puzzle-card animate-slide-up stagger-3" onclick="startPuzzle('maze')">
                        <div class="puzzle-card-image" style="background: linear-gradient(135deg, #E0E7FF 0%, #FCE7F3 100%);">
                            üß©
                        </div>
                        <div class="puzzle-card-content">
                            <h3>Math Maze</h3>
                            <p>Navigate through the maze by solving problems. Find the right path!</p>
                            <div class="puzzle-card-meta">
                                <span class="tag new">New!</span>
                                <span class="tag">Grades 1-5</span>
                            </div>
                        </div>
                    </div>

                    <div class="puzzle-card animate-slide-up stagger-4" onclick="startPuzzle('pattern')">
                        <div class="puzzle-card-image" style="background: linear-gradient(135deg, #FEF3C7 0%, #FECACA 100%);">
                            üî¢
                        </div>
                        <div class="puzzle-card-content">
                            <h3>Pattern Sequences</h3>
                            <p>Discover the pattern and find what comes next. Train your brain!</p>
                            <div class="puzzle-card-meta">
                                <span class="tag">Logic</span>
                                <span class="tag">All Grades</span>
                            </div>
                        </div>
                    </div>

                    <div class="puzzle-card animate-slide-up stagger-5" onclick="startPuzzle('bonds')">
                        <div class="puzzle-card-image" style="background: linear-gradient(135deg, #DBEAFE 0%, #D1FAE5 100%);">
                            üîó
                        </div>
                        <div class="puzzle-card-content">
                            <h3>Number Bonds</h3>
                            <p>Connect numbers that belong together. Perfect for building math facts!</p>
                            <div class="puzzle-card-meta">
                                <span class="tag">Foundations</span>
                                <span class="tag">Grades 1-3</span>
                            </div>
                        </div>
                    </div>

                    <div class="puzzle-card animate-slide-up stagger-5" onclick="startPuzzle('numberblock')">
                        <div class="puzzle-card-image" style="background: linear-gradient(135deg, #FCE7F3 0%, #E0E7FF 100%);">
                            üß±
                        </div>
                        <div class="puzzle-card-content">
                            <h3>Numberblocks</h3>
                            <p>Build and color friendly number characters! Inspired by the show.</p>
                            <div class="puzzle-card-meta">
                                <span class="tag">Creative</span>
                                <span class="tag">Grades K-2</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Puzzle Page -->
        <section id="puzzlePage" class="puzzle-section" style="display: none;">
            <div class="container">
                <!-- Settings Panel -->
                <div class="settings-panel no-print">
                    <div class="settings-grid">
                        <div class="form-group">
                            <label class="form-label">Grade Level</label>
                            <select id="gradeLevel" class="form-select">
                                <option value="1">Grade 1 (Ages 5-6)</option>
                                <option value="2">Grade 2 (Ages 6-7)</option>
                                <option value="3" selected>Grade 3 (Ages 7-8)</option>
                                <option value="4">Grade 4 (Ages 8-9)</option>
                                <option value="5">Grade 5 (Ages 9-10)</option>
                                <option value="6">Grade 6 (Ages 10-11)</option>
                                <option value="7">Grade 7 (Ages 11-12)</option>
                            </select>
                        </div>

                        <div class="form-group" id="gridSizeGroup">
                            <label class="form-label">Grid Size</label>
                            <select id="gridSize" class="form-select">
                                <option value="3">3 x 3 (Easy)</option>
                                <option value="4" selected>4 x 4 (Medium)</option>
                                <option value="5">5 x 5 (Challenge)</option>
                                <option value="6">6 x 6 (Expert)</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Difficulty</label>
                            <select id="difficulty" class="form-select">
                                <option value="practice">Practice (Same operation)</option>
                                <option value="mixed" selected>Mixed (Random operations)</option>
                                <option value="challenge">Challenge (Tiered)</option>
                            </select>
                        </div>

                        <div class="form-group" style="display: flex; align-items: flex-end;">
                            <div class="puzzle-controls" style="width: 100%;">
                                <button class="btn btn-primary" onclick="generateCurrentPuzzle()" style="flex: 1;">
                                    New Puzzle
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Puzzle Container -->
                <div id="puzzleContainer" class="puzzle-container">
                    <!-- Dynamic puzzle content will be inserted here -->
                </div>

                <!-- Action Buttons -->
                <div class="puzzle-controls no-print" style="display: flex; justify-content: center; gap: 1rem; margin-top: 1.5rem; flex-wrap: wrap;">
                    <button class="btn btn-secondary" onclick="showHome()">
                        ‚Üê Back to Home
                    </button>
                    <button class="btn btn-success" onclick="checkAnswers()">
                        ‚úì Check Answers
                    </button>
                    <button class="btn btn-warning" onclick="toggleAnswers()">
                        üëÅ Show/Hide Answers
                    </button>
                    <button class="btn btn-secondary" onclick="window.print()">
                        üñ® Print
                    </button>
                </div>
            </div>
        </section>

        <!-- Progress Page -->
        <section id="progressPage" class="progress-section" style="display: none;">
            <div class="container">
                <h2 class="text-gradient" style="text-align: center; margin-bottom: 2rem;">Your Progress</h2>

                <!-- Stats Grid -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon">üß©</div>
                        <div class="stat-value" id="statPuzzlesCompleted">0</div>
                        <div class="stat-label">Puzzles Completed</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">‚≠ê</div>
                        <div class="stat-value" id="statStarsEarned">0</div>
                        <div class="stat-label">Stars Earned</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üî•</div>
                        <div class="stat-value" id="statStreak">0</div>
                        <div class="stat-label">Day Streak</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üéØ</div>
                        <div class="stat-value" id="statAccuracy">0%</div>
                        <div class="stat-label">Accuracy</div>
                    </div>
                </div>

                <!-- Achievements -->
                <div class="achievements-section">
                    <h3 style="margin-bottom: 1.5rem; text-align: center;">Achievements</h3>
                    <div id="achievementsGrid" class="achievements-grid">
                        <!-- Achievements will be dynamically generated -->
                    </div>
                </div>

                <!-- Back Button -->
                <div style="text-align: center; margin-top: 2rem;">
                    <button class="btn btn-primary btn-lg" onclick="showHome()">
                        ‚Üê Back to Puzzles
                    </button>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="main-footer no-print">
        <div class="container">
            <div class="footer-content">
                <p>Made with ‚ù§Ô∏è for kids discovering that numbers are amazing!</p>
                <div class="footer-links">
                    <a href="#" onclick="showHome()">Home</a>
                    <a href="#" onclick="showProgress()">Progress</a>
                </div>
            </div>
        </div>
    </footer>

    <!-- Print Header -->
    <div class="print-only" style="text-align: center; padding: 20px;">
        <h1 style="font-size: 24pt; margin-bottom: 10px;">MathBlocks Puzzle</h1>
        <p style="font-size: 12pt;">Name: _________________________ Date: _____________</p>
    </div>

    <script src="js/app.js"></script>
</body>
</html>
